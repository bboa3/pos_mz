[
  {
    "doc_type": "Sales Invoice",
    "doctype": "Print Format",
    "name": "POS MZ Receipt",
    "module": "POS Next",
    "html": "<style>\n  @page { size: 80mm auto; margin: 0; }\n  body {\n    font-family: 'DejaVu Sans', Arial, sans-serif;\n    width: 80mm; max-width: 80mm; margin: 0 auto; padding: 10px;\n    font-size: 11px; line-height: 1.4;\n  }\n  .muted { color: #666; }\n  .center { text-align: center; }\n  .bold { font-weight: 700; }\n  .row { display: table; width: 100%; margin: 4px 0; }\n  .row > span:first-child { display: table-cell; text-align: left; width: 58%; }\n  .row > span:last-child { display: table-cell; text-align: right; width: 42%; }\n  .dash { border-top: 1px dashed #333; margin: 10px 0; }\n  .solid { border-top: 2px solid #000; margin: 10px 0; }\n  .tot { font-size: 14px; font-weight: 700; padding-top: 6px; }\n  .big { font-size: 16px; font-weight: 700; }\n  table { width: 100%; border-collapse: collapse; }\n  th, td { padding: 2px 0; font-size: 11px; }\n  th { text-align: left; font-weight: 700; }\n  th.qty, td.qty { width: 12%; text-align: right; }\n  th.val, td.val { width: 28%; text-align: right; }\n  .kv { margin: 2px 0; }\n  .kv .k { display: inline-block; min-width: 80px; }\n  .fine { font-size: 9px; }\n</style>\n\n{%- set cur = frappe.db.get_value('Currency', doc.currency, 'symbol') or doc.currency -%}\n{%- set co = frappe.get_doc('Company', doc.company) -%}\n{%- set nuit = co.tax_id or '' -%}\n\n<!-- Company -->\n<div class=\"center\">\n  <div class=\"big\">{{ co.company_name or doc.company }}</div>\n  {%- if nuit %}<div class=\"fine\">NUIT: {{ nuit }}</div>{% endif %}\n</div>\n<div class=\"dash\"></div>\n\n<!-- Customer & Invoice Meta -->\n<div class=\"kv\"><span class=\"k bold\">Cliente:</span> {{ doc.customer_name or doc.customer }}</div>\n{%- set cust_nuit = frappe.db.get_value('Customer', doc.customer, 'tax_id') -%}\n{%- if cust_nuit %}<div class=\"kv\"><span class=\"k bold\">NUIT:</span> {{ cust_nuit }}</div>{% endif %}\n{%- set cust_phone = frappe.db.get_value('Customer', doc.customer, 'mobile_no') -%}\n{%- if not cust_phone -%}{%- set _pc = frappe.db.get_value('Customer', doc.customer, 'customer_primary_contact') -%}{%- if _pc -%}{%- set cust_phone = frappe.db.get_value('Contact', _pc, 'mobile_no') -%}{%- endif -%}{%- endif -%}\n{%- if cust_phone %}<div class=\"kv\"><span class=\"k bold\">Telefone:</span> {{ cust_phone }}</div>{% endif %}\n<div class=\"kv\"><span class=\"k bold\">Data:</span> {{ frappe.format(doc.posting_date, {'fieldtype': 'Date'}) }} {{ (doc.posting_time|string).split('.')[0] if doc.posting_time else '' }}</div>\n<div class=\"kv\"><span class=\"k bold\">Factura:</span> {{ doc.name }}</div>\n<div class=\"dash\"></div>\n\n<!-- Items -->\n<table>\n  <thead>\n    <tr>\n      <th>Descricao</th>\n      <th class=\"qty\">Qtd</th>\n      <th class=\"val\">Valor</th>\n    </tr>\n  </thead>\n  <tbody>\n  {%- for it in doc.items -%}\n    <tr>\n      <td>{{ it.item_name or it.item_code }}</td>\n      <td class=\"qty\">{{ (it.qty or 0)|round(0, 'floor') }}</td>\n      <td class=\"val\">{{ cur }} {{ '%.2f'|format((it.amount or (it.qty * (it.rate or 0)))|float) }}</td>\n    </tr>\n  {%- endfor -%}\n  </tbody>\n</table>\n<div class=\"dash\"></div>\n\n<!-- Taxes & Totals -->\n{%- set subtotal = (doc.net_total or doc.total or 0) -%}\n<div class=\"row\"><span>Sub-total</span><span>{{ cur }} {{ '%.2f'|format(subtotal|float) }}</span></div>\n{%- if doc.taxes and doc.total_taxes_and_charges -%}\n  {%- for t in doc.taxes -%}\n    <div class=\"row\"><span>{{ (t.description or 'Imposto')[:18] }}</span><span>{{ cur }} {{ '%.2f'|format((t.tax_amount or 0)|float) }}</span></div>\n  {%- endfor -%}\n{%- endif -%}\n{%- if doc.discount_amount -%}\n  <div class=\"row\"><span>Desconto</span><span>- {{ cur }} {{ '%.2f'|format((doc.discount_amount|abs)|float) }}</span></div>\n{%- endif -%}\n<div class=\"solid\"></div>\n<div class=\"row tot\"><span>TOTAL</span><span>{{ cur }} {{ '%.2f'|format((doc.grand_total or 0)|float) }}</span></div>\n<div class=\"dash\"></div>\n\n<!-- Payments -->\n{%- if doc.payments -%}\n  <div class=\"bold\">Pagamentos</div>\n  {%- for p in doc.payments if p.amount and p.amount != 0 -%}\n    <div class=\"row\"><span>{{ p.mode_of_payment }}</span><span>{{ cur }} {{ '%.2f'|format((p.amount)|float) }}</span></div>\n    {%- if p.reference_no %}<div class=\"fine\">Ref: {{ p.reference_no }}</div>{% endif %}\n  {%- endfor -%}\n  <div class=\"row\"><span>Total Pago</span><span>{{ cur }} {{ '%.2f'|format((doc.paid_amount or 0)|float) }}</span></div>\n  {%- if doc.change_amount and doc.change_amount > 0 -%}\n    <div class=\"row\"><span>Troco</span><span>{{ cur }} {{ '%.2f'|format((doc.change_amount)|float) }}</span></div>\n  {%- endif -%}\n  <div class=\"dash\"></div>\n{%- endif -%}\n\n<!-- Emphasis Total a Pagar -->\n<div class=\"center\">\n  <div class=\"bold\">TOTAL A PAGAR</div>\n  <div class=\"big\">{{ cur }} {{ '%.2f'|format((doc.grand_total or 0)|float) }}</div>\n</div>\n<div class=\"solid\"></div>\n\n<!-- Footer / Legal -->\n<div class=\"center fine\">Processado por Computador</div>\n{%- if co.email or co.phone_no -%}\n  <div class=\"center fine\">{{ (co.phone_no or '') ~ ((' | ' ~ co.email) if co.email else '') }}</div>\n{%- endif -%}\n{%- if doc.docstatus == 0 -%}\n  <div class=\"center fine\">**** FATURA RASCUNHO ****</div>\n{%- else -%}\n  <div class=\"center fine\">**** FATURA FINAL ****</div>\n{%- endif -%}\n",
    "custom_format": 1,
    "disabled": 0,
    "standard": "No",
    "print_format_type": "Jinja",
    "default_print_language": "pt-MZ",
    "font_size": 12
  }
]